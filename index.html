<!DOCTYPE html>
<!-- Shamelessly, overtly, and clumsily ripped off from the great jP00p's Star Trek Bingo.
Thanks to those who ran so I could stumble. -->

<html>
<head>
    <meta charset="UTF-8">
    <title>X-Files Bingo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Impact&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.cdnfonts.com/css/green-screen" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="greenscreen.css">
</head>
<body id="stretch">

<div class="wrap" id="gap">
        <div>
                <a class="green" href="#" onclick="window.location.reload();">New board</a>
                <br>
                <br>
    </div>

        <div class="content">
            <div class="bingo-board">
                <!-- Replace these cells with your X-Files-themed objectives -->
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell" id="free">
                    <div class="text">Free Space</div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                <div class="cell">
                    <div class="text"></div>
                </div>
                </div>

            </div>
        </div>

    </div>
</div>

<div id="bingo-popup" class="popup">
    <div class="popup-content">
        <span id="close-popup" class="close-icon">X</span>
                <img id="bingo-gif" src="bingo.gif" alt="Bingo Celebration">
        <h1>Bingo!</h1>
    </div>
</div>


<script>

    var api_key = "FR57D8JH3LYH";
    var search_terms = [
        "Mulder",
        "Scully",
        "Alien",
        "Cigarette Smoking Man",
        "Creepy",
        "Truth",
        "Skinner",
        "Mulder-and-Scully",
        "Spooky",

        // Add more relevant search terms here
    ];

    var stuff = [
    'Bat signal!',
    '"Mulder it\'s me"',
    '"Scully it\'s me"',
    'Lone Gunmen to the rescue',
    'Lab tech gets his heart broken',
    'Suddenly, industrial corridors',
    'Main character gets shot',
    'Field Report',
    'Scully believes!',
    'Scully doesn\'t believe',
    'Scully does an autopsy',
    'We\'re in a hospital',
    'We\'re in a jail',
    'We\'re in a police station',
    'Staying in a motel',
    'Forest strolls',
    'Muldur eyebrow raise',
    'Cancer Man is ominous',
    'Cancer Man brags',
    'It\'s raining',
    'Cemetary',
    'Hey, that\'s just Vancouver!',
    '"Stop, Federal Agent!"',
    'We\'re in this alone',
    'Yum, sunflower seeds',
    'Skinner chews out Mulder',
    'Skinner chews out Scully',
    'Good guy Skinner',
    'Terrible CGI',
    '"The truth"',
    '"Believe"',
    'Spooky Mulder',
    'Mulder loses his cool',
    'Vaguely racist',
    'Shirts off for science',
    'Scully misses vital paranormal moment',
    '"I\'m telling you Scully"',
    'Literally aliens',
    'Running or out for a run',
    'Mulder smokes someone',
    'Scully smokes someone',
    'Chasing a car on foot',
    'Foxy Mulder',
    'Episode gets sexy',
    'Why are you by yourself!?',
    'Mulder doesn\'t believe',
    'Mulder jumps to conclusions',
    'Zoom and enhance',
    'Hacking',
    'Lights are left off for some reason',
    'Someone doesn\'t trust a phone line',
    'Scully talks about science',
    '"I\'m a doctor"',
    'The Syndicate',
    'Sexual tension',
    '"Are you suggesting ..."',
    'Flashin\' badges',
    'Trench coat chic',
    'A foreign language is spoken',
    'Nightmare fuel',
    'Mulder mentions Samantha',
    'Parents show up',
    'Panflutes',
    'Outdated 90s reference',
    'Scully\'s a smokeshow',
    'Someone is abducted',
    'Fight!',
    'Stakeout',
    'Murder most foul',
    'Alley way',
    'Bad guy is after a main character',
    'Main character dies',
    'Episode isn\'t paranormal',
    'Monster of the week',
    'Scully needs to fly somewhere',
    'Mulder needs to fly somewhere',
    'Weird thing goes unresolved',
    'Mulder is funny',
    'Scully is funny',
    'Someone is a total creep',
    '*screams*',
    'Religious overtones',
    'Overt government conspiracy',
    'Humans are the real monsters',
    'Mulder is lovin\'it',
    'This would flip modern science on its head',
    'Psychic powers',
    'Episode gets funny weird',
    'A meaningful look',
    'Local police are useless',
    'Overly confident local cop',
    'Crime scene photos',
    '"Agents Mulder and Scully"',
    'Construction site',
    'You recognise an actor',
    'Scully\'s had enough of Mulder\'s shit',
    'Sympathetic baddie',
    'Cult vibez',
    '"Dana"',
    '"Fox"',
    'Yuck.',
    'Too scaowy',
    'Why would you touch that??',
    'CUT TO: Gun close-up',
    'Oozy goo',
    ];

document.addEventListener("DOMContentLoaded", function() {
    var triggeredBingos = { rows: [], columns: [], diagonals: [] }; // Tracks completed lines

    var cells = document.querySelectorAll('.bingo-board > div:not(#free) > div.text');
    cells.forEach(function(cell) {
        let pick = Math.floor(Math.random() * stuff.length);
        cell.innerHTML = stuff[pick];
        stuff.splice(pick, 1);
    });

    var allcells = document.querySelectorAll('.bingo-board > div');
    allcells.forEach(function(cell) {
        cell.addEventListener('click', function(e) {
            e.preventDefault();

            var toggle = this.style;
            var search_url = "https://api.tenor.com/v1/random?q=" + search_terms[Math.floor(Math.random() * search_terms.length)] + " x-files&key=" + api_key + "&limit=5&contentfilter=off&locale=en_US";

            if (cell.classList.contains("active")) {
                cell.classList.remove("active");
                toggle.backgroundImage = "none";
            } else {
                cell.classList.add("active");
                fetch(search_url)
                    .then(data => data.json())
                    .then(data => {
                        toggle.backgroundImage = "url(" + data.results[Math.floor(Math.random() * data.results.length)].media[0].tinygif.url + ")";
                    });
                checkForBingo(); // Check for bingo after marking a cell as active
            }
        });
    });

document.getElementById("close-popup").addEventListener("click", function() {
    document.getElementById("bingo-popup").style.display = "none";
});


    // Function to check for bingo
    function checkForBingo() {
        const board = Array.from(document.querySelectorAll('.bingo-board > div'));
        const size = 5; // 5x5 board

        // Check rows and columns
        for (let i = 0; i < size; i++) {
            // Check row
            if (
                board
                    .slice(i * size, (i + 1) * size)
                    .every(cell => cell.classList.contains('active')) &&
                !triggeredBingos.rows.includes(i)
            ) {
                triggeredBingos.rows.push(i);
                showBingoPopup();
                return;
            }
            // Check column
            if (
                board
                    .filter((_, index) => index % size === i)
                    .every(cell => cell.classList.contains('active')) &&
                !triggeredBingos.columns.includes(i)
            ) {
                triggeredBingos.columns.push(i);
                showBingoPopup();
                return;
            }
        }

        // Check diagonals
        if (
            [0, 6, 12, 18, 24].every(index => board[index].classList.contains('active')) &&
            !triggeredBingos.diagonals.includes("main")
        ) {
            triggeredBingos.diagonals.push("main");
            showBingoPopup();
            return;
        }
        if (
            [4, 8, 12, 16, 20].every(index => board[index].classList.contains('active')) &&
            !triggeredBingos.diagonals.includes("anti")
        ) {
            triggeredBingos.diagonals.push("anti");
            showBingoPopup();
            return;
        }
    }

    // Function to display the bingo popup
    function showBingoPopup() {
        document.getElementById("bingo-popup").style.display = "flex";
    }

    const event = new MouseEvent('click', {
        view: window,
        bubbles: true,
        cancelable: true
    });

    document.getElementById("free").dispatchEvent(event);
});





</script>
</body>
</html>
